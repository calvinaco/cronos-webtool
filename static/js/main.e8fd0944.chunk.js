(this["webpackJsonpcronos-webtool"]=this["webpackJsonpcronos-webtool"]||[]).push([[0],{351:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},370:function(e,t,n){},462:function(e,t){},464:function(e,t){},466:function(e,t){},470:function(e,t){},494:function(e,t){},496:function(e,t){},505:function(e,t){},507:function(e,t){},517:function(e,t){},519:function(e,t){},633:function(e,t){},635:function(e,t){},642:function(e,t){},643:function(e,t){},661:function(e,t){},740:function(e,t,n){},741:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(50),s=n.n(r),o=(n(370),n(107)),i=n(53),u=n(48),l=n(34),d=n(346),b=n(238),p=n(347),j=n.n(p),f=n(8),h=b.a.TabPane;function m(){var e=Object(l.g)(),t=Object(l.h)(),n=e.pathname.slice(1);return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)(j.a,{href:"https://github.com/calvinaco/cronos-webtool",target:"_blank",position:"right",color:"black",children:"Fork me on GitHub"}),Object(f.jsx)("h1",{children:"Cronos Web Tool"}),Object(f.jsxs)(b.a,{defaultActiveKey:n,onChange:function(e){switch(e){case"accounts":t("/accounts");break;case"accountcrobalance":t("/accountcrobalance");break;case"transaction":t("/transaction");break;case"settings":t("/settings")}},children:[Object(f.jsx)(h,{tab:"Accounts Balances",children:" "},"accounts"),Object(f.jsx)(h,{tab:"Account Historical CRO Balance",children:" "},"accountcrobalance"),Object(f.jsx)(h,{tab:"Query Transaction Status",children:" "},"transaction"),Object(f.jsx)(h,{tab:"Settings"},"settings")]}),Object(f.jsx)(l.b,{})]})}var x,O=n(41),y=n.n(O),v=n(65),g=n(750),k=n(356),w=n(745),S=n(748),A=n(358),C=n(752),F=n(753),T=n(754),B=n(350),I=n.n(B),R=n(25),E=n(27),N=n(351),D=n(96),P=n.n(D),V=n(235),H=n.n(V);!function(e){e.NotOnChain="Not on Chain",e.SuccessOnChain="Success on chain",e.FailedOnChain="Failed on chain"}(x||(x={}));var z=function(){function e(t){Object(R.a)(this,e),this.url=t,this.web3=void 0,this.web3=new H.a(new H.a.providers.HttpProvider(t))}return Object(E.a)(e,[{key:"getTransactionRecord",value:function(){var e=Object(v.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.getTransactionReceipt(t);case 2:if(null!==(n=e.sent)){e.next=5;break}return e.abrupt("return",{status:x.NotOnChain});case 5:if(n.status){e.next=7;break}return e.abrupt("return",{status:x.FailedOnChain,receipt:n});case 7:return e.abrupt("return",{status:x.SuccessOnChain,receipt:n});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBlockHeight",value:function(){var e=Object(v.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.web3.eth.getBlockNumber());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=Object(v.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.getBalance(t);case 2:return n=e.sent,e.abrupt("return",new P.a(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBalanceAtHeight",value:function(){var e=Object(v.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.getBalance(t,n);case 2:return a=e.sent,e.abrupt("return",new P.a(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getCRC20Balance",value:function(){var e=Object(v.a)(y.a.mark((function e(t,n){var a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new this.web3.eth.Contract(N,n),e.next=3,a.methods.balanceOf(t).call();case 3:return c=e.sent,e.abrupt("return",new P.a(c));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isValidAddress",value:function(e){return this.web3.utils.isAddress(e)}}]),e}();function _(e){var t=c.a.useState([]),n=Object(u.a)(t,2),a=n[0],r=n[1],s=function(){var t=Object(v.a)(y.a.mark((function t(n){var c,s;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n){t.next=2;break}return t.abrupt("return");case 2:return c=new Date,t.prev=3,t.next=6,e.cronosService.getTransactionRecord(n);case 6:s=t.sent,i={key:Date.now(),txHash:n,requestedAt:c,status:s.status,receipt:s.receipt},r([i].concat(Object(o.a)(a))),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(3),W("Get Transaction Error",t.t0.toString()),t.abrupt("return");case 14:case"end":return t.stop()}var i}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)(g.b,{direction:"vertical",children:Object(f.jsx)(k.a.Search,{placeholder:"Transaction Hash",enterButton:"Query",size:"large",onSearch:s,style:{width:650}})}),Object(f.jsx)(w.a,{dataSource:a,columns:L,pagination:!1})]})}var L=[{title:"Requested At",dataIndex:"requestedAt",key:"requestedAt",render:function(e){return Object(f.jsx)("span",{children:e.toLocaleString()})}},{title:"Status",dataIndex:"status",key:"status",render:function(e){switch(e){case x.NotOnChain:return Object(f.jsx)(C.a,{style:{fontSize:22}});case x.SuccessOnChain:return Object(f.jsx)(F.a,{twoToneColor:"#52c41a",style:{fontSize:22}});case x.FailedOnChain:return Object(f.jsx)(T.a,{twoToneColor:"#eb2f96",style:{fontSize:22}})}}},{title:"Transaction Hash",dataIndex:"txHash",key:"txHash",render:function(e,t,n){return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://cronos.crypto.org/explorer/tx/".concat(e),children:e}),Object(f.jsx)(S.a,{children:Object(f.jsx)(S.a.Panel,{header:"Transaction Receipt",children:!!t.receipt&&Object(f.jsx)(I.a,{iconStyle:"square",collapsed:1,src:t.receipt})},"receipt")})]})}}],W=function(e,t){A.a.error({message:e,description:t})},q=(n(740),{name:"CRO",symbol:"CRO",contractAddress:"",decimalPlaces:18}),M={version:1,accounts:[],tokens:[{name:"Dai Stablecoin",symbol:"DAI",contractAddress:"0xf2001b145b43032aaf5ee2884e456ccd805f677d",decimalPlaces:18},{name:"Tether USD",symbol:"USDT",contractAddress:"0x66e428c3f67a68878562e79A0234c1F83c208770",decimalPlaces:6},{name:"USD Coin",symbol:"USDC",contractAddress:"0xc21223249CA28397B4B6541dfFaEcC539BfF0c59",decimalPlaces:6},{name:"VVSToken",symbol:"VVS",contractAddress:"0x2D03bECE6747ADC00E1a131BBA1469C15fD11e03",decimalPlaces:18},{name:"Wrapped BTC",symbol:"WBTC",contractAddress:"0x062E66477Faf219F25D27dCED647BF57C3107d52",decimalPlaces:8},{name:"Wrapped ETH",symbol:"WETH",contractAddress:"0xe44Fd7fCb2b1581822D0c862B68222998a0c299a",decimalPlaces:18}]},G=n(751),U=n(755),J=n(749),Q=n(82);function K(e){var t=c.a.useState({time:new Date,blockNumber:0}),n=Object(u.a)(t,2),a=n[0],r=n[1],s=c.a.useState([]),l=Object(u.a)(s,2),d=l[0],b=l[1],p=function(){var t=Object(v.a)(y.a.mark((function t(){var n,a,c,s,u;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.cronosService.getBlockHeight();case 2:return n=t.sent,a=[q].concat(Object(o.a)(e.tokens)),c=a.map((function(t){return t===q?e.cronosService.getBalance(e.account):e.cronosService.getCRC20Balance(e.account,t.contractAddress)})),t.next=7,Promise.all(c);case 7:s=t.sent,u=s.map((function(e,t){var n=a[t];return{key:n.contractAddress,name:n.name,balance:e.dividedBy(new P.a(10).pow(n.decimalPlaces)).toFormat(n.decimalPlaces,Object(i.a)(Object(i.a)({},Y),{},{suffix:" ".concat(n.symbol)}))}})),b(u),r({time:new Date,blockNumber:n});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c.a.useEffect((function(){0===d.length&&p().catch((function(e){Z("Fetch balance error",e.toString())}));var e=setInterval((function(){p().catch((function(e){Z("Fetch balance error",e.toString())}))}),3e4);return function(){return clearInterval(e)}})),Object(f.jsx)(J.a,{title:Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)("div",{children:Object(f.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://cronos.crypto.org/explorer/address/".concat(e.account),children:e.account})}),Object(f.jsxs)("div",{children:[a.time.toLocaleString()," at Block #",a.blockNumber]})]}),extra:Object(f.jsx)(Q.a,{onClick:function(){return e.onRemoveFromWishList()},children:"Remove"}),style:{width:600},children:Object(f.jsx)(w.a,{dataSource:d,columns:X,pagination:!1})})}var X=[{title:"Token",dataIndex:"name",key:"name"},{title:"Balance",dataIndex:"balance",key:"balance",align:"right",render:function(e){return Object(f.jsx)("span",{style:{fontFamily:"Nunito,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol"},children:e})}}],Y={prefix:"",decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0,suffix:""},Z=function(e,t){A.a.error({message:e,description:t})};function $(e){var t=c.a.useState(""),n=Object(u.a)(t,2),a=n[0],r=n[1];return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)("div",{children:Object(f.jsx)(g.b,{direction:"vertical",children:Object(f.jsx)(k.a.Search,{style:{width:500},placeholder:"Add Account to Watch List",enterButton:"Add",size:"large",onSearch:function(t){try{e.onAddAccountToWatchList(t)}catch(n){ee("Cannot Add Account to Watch List",n.toString())}}})})}),Object(f.jsx)("div",{style:{textAlign:"right"},children:Object(f.jsxs)(g.b,{direction:"vertical",children:[Object(f.jsxs)("div",{children:["Auto Refresh ",Object(f.jsx)(G.a,{checked:!0,disabled:!0})]}),Object(f.jsx)(k.a,{placeholder:"Filter Account",prefix:Object(f.jsx)(U.a,{}),size:"large",onChange:function(e){r(e.target.value)}})]})}),!!a&&"Filtering by account: ".concat(a),e.accounts.reduce((function(t,n){return n.includes(a)?(t.push(Object(f.jsx)(g.b,{children:Object(f.jsx)(K,{cronosService:e.cronosService,onRemoveFromWishList:function(){return e.onRemoveAccountFromWishList(n)},account:n,tokens:e.tokens})},n)),t):t}),[])]})}var ee=function(e,t){A.a.error({message:e,description:t})},te=n(746),ne=n(747);function ae(e){var t,n,a,c,r=e.disabled;return Object(f.jsxs)(te.a,{name:"basic",labelCol:{span:6},wrapperCol:{span:18},initialValues:{remember:!0},onFinish:function(t){try{e.onAdd&&e.onAdd(t)}catch(n){A.a.error({message:"Add Token Error",description:n.toString()})}},children:[Object(f.jsx)(te.a.Item,{label:"Token Name",name:"name",rules:[{required:!0}],children:Object(f.jsx)(k.a,{disabled:r,defaultValue:null===(t=e.defaultValue)||void 0===t?void 0:t.name})}),Object(f.jsx)(te.a.Item,{label:"Symbol",name:"symbol",rules:[{required:!0}],children:Object(f.jsx)(k.a,{disabled:r,defaultValue:null===(n=e.defaultValue)||void 0===n?void 0:n.symbol})}),Object(f.jsx)(te.a.Item,{label:"Decimal Places",name:"decimalPlaces",rules:[{required:!0}],children:Object(f.jsx)(ne.a,{min:0,disabled:r,defaultValue:null===(a=e.defaultValue)||void 0===a?void 0:a.decimalPlaces})}),Object(f.jsx)(te.a.Item,{label:"Contract Address",name:"contractAddress",rules:[{required:!0}],children:Object(f.jsx)(k.a,{disabled:r,defaultValue:null===(c=e.defaultValue)||void 0===c?void 0:c.contractAddress})}),!r&&Object(f.jsx)(te.a.Item,{children:Object(f.jsx)(Q.a,{type:"primary",htmlType:"submit",children:"Add Token"})})]})}function ce(e){return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)(J.a,{title:"Add Token",style:{width:600},children:Object(f.jsx)(ae,{onAdd:e.onAddTokenToSettings})}),e.settings.tokens.map((function(t,n){return Object(f.jsx)(g.b,{direction:"vertical",children:Object(f.jsx)(J.a,{title:t.name,extra:Object(f.jsx)(Q.a,{onClick:function(){return e.onRemoveTokenFromSettings(n)},children:"Remove"}),style:{width:600},children:Object(f.jsx)(ae,{defaultValue:t,disabled:!0})})},n)}))]})}function re(e){var t=c.a.useState(),n=Object(u.a)(t,2),a=n[0],r=n[1],s=function(){var t=Object(v.a)(y.a.mark((function t(n){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.cronosService.getBalanceAtHeight(n.account,n.blockNumber);case 3:a=t.sent,r({account:n.account,blockNumber:n.blockNumber,baseBalance:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),se("Get Balance Error",t.t0.toString());case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)(g.b,{direction:"vertical",children:Object(f.jsxs)(te.a,{name:"basic",onFinish:s,children:[Object(f.jsx)(te.a.Item,{label:"Account",name:"account",rules:[{required:!0}],children:Object(f.jsx)(k.a,{size:"large",style:{width:650}})}),Object(f.jsx)(te.a.Item,{label:"Block Number",name:"blockNumber",rules:[{required:!0}],children:Object(f.jsx)(ne.a,{min:0,size:"large",style:{width:150}})}),Object(f.jsx)(te.a.Item,{children:Object(f.jsx)(Q.a,{type:"primary",htmlType:"submit",children:"Query Balance"})})]})}),a&&Object(f.jsx)(J.a,{title:Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)("div",{children:Object(f.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://cronos.crypto.org/explorer/address/".concat(a.account),children:a.account})}),Object(f.jsxs)("div",{children:["At Block #",a.blockNumber]})]}),children:a.baseBalance.dividedBy(oe).toFormat(18,Object(i.a)(Object(i.a)({},ie),{},{suffix:" CRO"}))})]})}var se=function(e,t){A.a.error({message:e,description:t})},oe=new P.a(10).pow(18),ie={prefix:"",decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0,suffix:""};function ue(){var e=Object(d.useLocalStorage)("settings"),t=Object(u.a)(e,2),n=t[0],a=t[1];if(!n)return a(M),Object(f.jsx)(c.a.Fragment,{});var r=new z("https://evm-cronos.crypto.org");return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(l.e,{children:Object(f.jsxs)(l.c,{path:"/",element:Object(f.jsx)(m,{}),children:[Object(f.jsx)(l.c,{path:"accounts",element:Object(f.jsx)($,{cronosService:r,onAddAccountToWatchList:function(e){if(!r.isValidAddress(e))throw new Error("invalid address");if(-1!==n.accounts.indexOf(e))throw new Error("account already added");a(Object(i.a)(Object(i.a)({},n),{},{accounts:[].concat(Object(o.a)(n.accounts),[e])}))},onRemoveAccountFromWishList:function(e){a(Object(i.a)(Object(i.a)({},n),{},{accounts:n.accounts.filter((function(t){return t!==e}))}))},accounts:n.accounts,tokens:n.tokens})}),Object(f.jsx)(l.c,{path:"accountcrobalance",element:Object(f.jsx)(re,{cronosService:r})}),Object(f.jsx)(l.c,{path:"transaction",element:Object(f.jsx)(_,{cronosService:r})}),Object(f.jsx)(l.c,{path:"settings",element:Object(f.jsx)(ce,{settings:n,onAddTokenToSettings:function(e){if(!r.isValidAddress(e.contractAddress))throw new Error("invalid contract address");if(n.tokens.find((function(t){return t.contractAddress===e.contractAddress})))throw new Error("token already added");a(Object(i.a)(Object(i.a)({},n),{},{tokens:[].concat(Object(o.a)(n.tokens),[e])}))},onRemoveTokenFromSettings:function(e){a(Object(i.a)(Object(i.a)({},n),{},{tokens:n.tokens.filter((function(t,n){return n!==e}))}))}})}),Object(f.jsx)(l.c,{index:!0,element:Object(f.jsx)(l.a,{to:"accounts"})})]})})})}var le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,756)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},de=n(179);s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(de.a,{basename:"/cronos-webtool",children:Object(f.jsx)(ue,{})})}),document.getElementById("root")),le()}},[[741,1,2]]]);
//# sourceMappingURL=main.e8fd0944.chunk.js.map